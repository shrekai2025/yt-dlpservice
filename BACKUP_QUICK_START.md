# 数据库备份功能 - 快速开始

## 两种备份模式

### 📦 数据库备份（仅数据库）
- **大小**: ~10MB
- **时间**: <5秒
- **包含**: SQLite 数据库文件
- **用途**: 日常快速备份

### 🗄️ 完整备份（数据库 + 媒体）
- **大小**: ~2GB（取决于媒体文件）
- **时间**: 1-5分钟
- **包含**: 数据库 + media-uploads + media-thumbnails + exports + cookies + temp
- **用途**: 服务器迁移、完整归档

## 快速操作指南

### 创建备份

1. 访问：`/admin/config-tools` → 数据库备份
2. 选择备份模式：
   - 不勾选"包含媒体文件" = 数据库备份
   - 勾选"包含媒体文件" = 完整备份
3. 点击"创建备份"按钮
4. 等待完成

### 下载备份

1. 在备份卡片中点击"下载"按钮
2. 保存到本地安全位置

### 恢复备份

⚠️ **警告**: 恢复操作不可逆，会覆盖当前数据！

1. 点击备份卡片中的"恢复"按钮
2. 阅读警告信息
3. 确认操作
4. 等待完成后**刷新页面**

### 上传备份（迁移到新服务器）

1. 点击"上传备份文件"
2. 选择本地备份文件
3. 等待上传完成
4. 点击"恢复"按钮

## 最佳实践

### 日常使用
- ✅ 每天创建数据库备份
- ✅ 每周创建完整备份并下载到本地
- ✅ 重要操作前先创建备份

### 服务器迁移
1. 在旧服务器创建完整备份
2. 下载备份到本地
3. 在新服务器上传备份
4. 恢复完整备份
5. 刷新页面验证

### 存储建议
- 📥 定期下载备份到本地
- 💾 保存在多个位置（不同硬盘/云盘）
- 🔒 加密存储（备份包含敏感数据）

## 注意事项

### 数据库备份
- ✅ 快速、轻量
- ✅ 适合频繁备份
- ❌ 不包含媒体文件
- ❌ 不适合服务器迁移

### 完整备份
- ✅ 包含所有数据
- ✅ 适合服务器迁移
- ✅ 可完整恢复所有功能
- ⚠️ 文件大、耗时长

## 故障恢复

### 如果恢复失败
1. 系统会自动回滚到恢复前状态
2. 检查备份文件是否完整
3. 查看服务器日志
4. 联系技术支持

### 如果备份创建失败
1. 检查磁盘空间
2. 清理旧备份或临时文件
3. 重试操作

## 技术支持

- 详细文档: [BACKUP_ENHANCEMENT_SUMMARY.md](./BACKUP_ENHANCEMENT_SUMMARY.md)
- 位置: `/admin/config-tools` → 数据库备份
- 备份存储: `data/` 目录

---

**重要提醒**:
1. 恢复前务必先创建当前状态的备份！
2. 完整备份包含敏感数据，请妥善保管！
3. 恢复后必须刷新页面！
